<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foodie Sizzle</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2036224600016035"
     crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 10px;
    }

    .game-container {
        background: white;
        border-radius: 20px;
        padding: 15px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        max-width: 500px;
        width: 100%;
        max-height: 95vh;
        display: flex;
        flex-direction: column;
    }

    h1 {
        text-align: center;
        color: #667eea;
        margin-bottom: 10px;
        font-size: 1.8em;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .score-board {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding: 10px;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        border-radius: 10px;
        color: white;
    }

    .score-item {
        text-align: center;
    }

    .score-label {
        font-size: 0.8em;
        opacity: 0.9;
    }

    .score-value {
        font-size: 1.3em;
        font-weight: bold;
        margin-top: 3px;
    }

    .board {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 4px;
        background: #f0f0f0;
        padding: 8px;
        border-radius: 10px;
        margin-bottom: 10px;
        flex-shrink: 0;
    }

    .cell {
        aspect-ratio: 1;
        background: white;
        border-radius: 6px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5em;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        touch-action: none;
        user-select: none;
        -webkit-user-select: none;
    }

    .cell:hover {
        transform: scale(1.05);
    }

    .cell.selected {
        background: #ffd700;
        transform: scale(1.1);
        box-shadow: 0 4px 10px rgba(255,215,0,0.5);
    }

    .cell.matched {
        animation: match 0.5s;
    }

    @keyframes match {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.3); opacity: 0.5; }
    }

    .buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
    }

    button {
        padding: 10px 20px;
        font-size: 0.9em;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: bold;
        transition: transform 0.2s;
    }

    button:hover {
        transform: translateY(-2px);
    }

    button:active {
        transform: translateY(0);
    }

    .game-over {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        text-align: center;
        z-index: 1000;
    }

    .game-over.show {
        display: block;
    }

    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        z-index: 999;
    }

    .overlay.show {
        display: block;
    }

    .ad-container {
        margin-top: 15px;
        text-align: center;
        min-height: 90px;
    }
</style>
```

</head>
<body>
    <div class="overlay" id="overlay"></div>

```
<div class="game-container">
    <h1>üçï Foodie Sizzle üçî</h1>
    
    <div class="score-board">
        <div class="score-item">
            <div class="score-label">„Çπ„Ç≥„Ç¢</div>
            <div class="score-value" id="score">0</div>
        </div>
        <div class="score-item">
            <div class="score-label">ÁßªÂãï</div>
            <div class="score-value" id="moves">30</div>
        </div>
    </div>

    <div class="board" id="board"></div>

    <div class="buttons">
        <button onclick="newGame()">Êñ∞„Åó„ÅÑ„Ç≤„Éº„É†</button>
    </div>

    <!-- Google AdSense Â∫ÉÂëä -->
    <div class="ad-container">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2036224600016035"
             data-ad-slot="auto"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
</div>

<div class="game-over" id="gameOver">
    <h2 style="color: #667eea; margin-bottom: 20px;">„Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ</h2>
    <p style="font-size: 1.5em; margin-bottom: 20px;">ÊúÄÁµÇ„Çπ„Ç≥„Ç¢: <strong id="finalScore">0</strong></p>
    <button onclick="newGame()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
</div>

<script>
    const FOODS = ['üçï', 'üçî', 'üçü', 'üåÆ', 'üç¶', 'üç©'];
    const BOARD_SIZE = 8;
    let board = [];
    let score = 0;
    let moves = 30;
    let selectedCell = null;
    let touchStartX = 0;
    let touchStartY = 0;
    let touchStartCell = null;

    function createBoard() {
        board = [];
        for (let i = 0; i < BOARD_SIZE; i++) {
            board[i] = [];
            for (let j = 0; j < BOARD_SIZE; j++) {
                board[i][j] = FOODS[Math.floor(Math.random() * FOODS.length)];
            }
        }
        // ÂàùÊúüÁä∂ÊÖã„Åß„Éû„ÉÉ„ÉÅ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØÂÜçÁîüÊàê
        while (hasMatches()) {
            for (let i = 0; i < BOARD_SIZE; i++) {
                for (let j = 0; j < BOARD_SIZE; j++) {
                    board[i][j] = FOODS[Math.floor(Math.random() * FOODS.length)];
                }
            }
        }
    }

    function hasMatches() {
        // Ê®™ÊñπÂêë„ÅÆ„Éû„ÉÉ„ÉÅ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        for (let i = 0; i < BOARD_SIZE; i++) {
            for (let j = 0; j < BOARD_SIZE - 2; j++) {
                if (board[i][j] === board[i][j+1] && board[i][j] === board[i][j+2]) {
                    return true;
                }
            }
        }
        
        // Á∏¶ÊñπÂêë„ÅÆ„Éû„ÉÉ„ÉÅ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        for (let i = 0; i < BOARD_SIZE - 2; i++) {
            for (let j = 0; j < BOARD_SIZE; j++) {
                if (board[i][j] === board[i+1][j] && board[i][j] === board[i+2][j]) {
                    return true;
                }
            }
        }
        return false;
    }

    function renderBoard() {
        const boardElement = document.getElementById('board');
        boardElement.innerHTML = '';
        
        for (let i = 0; i < BOARD_SIZE; i++) {
            for (let j = 0; j < BOARD_SIZE; j++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.textContent = board[i][j];
                cell.dataset.row = i;
                cell.dataset.col = j;
                cell.onclick = () => selectCell(i, j);
                
                // „Çø„ÉÉ„ÉÅ„Ç§„Éô„É≥„Éà„ÇíËøΩÂä†
                cell.addEventListener('touchstart', (e) => handleTouchStart(e, i, j), {passive: true});
                cell.addEventListener('touchmove', (e) => handleTouchMove(e), {passive: false});
                cell.addEventListener('touchend', (e) => handleTouchEnd(e), {passive: true});
                
                boardElement.appendChild(cell);
            }
        }
    }

    function handleTouchStart(e, row, col) {
        if (moves <= 0) return;
        
        const touch = e.touches[0];
        touchStartX = touch.clientX;
        touchStartY = touch.clientY;
        touchStartCell = {row, col};
    }

    function handleTouchMove(e) {
        if (!touchStartCell) return;
        e.preventDefault(); // „Çπ„ÇØ„É≠„Éº„É´„ÇíÈò≤„Åê
    }

    function handleTouchEnd(e) {
        if (!touchStartCell || moves <= 0) {
            touchStartCell = null;
            return;
        }

        const touch = e.changedTouches[0];
        const deltaX = touch.clientX - touchStartX;
        const deltaY = touch.clientY - touchStartY;
        
        // „Çπ„ÉØ„Ç§„Éó„ÅÆÊúÄÂ∞èË∑ùÈõ¢Ôºà„Éî„ÇØ„Çª„É´Ôºâ
        const minSwipeDistance = 30;
        
        // „Çπ„ÉØ„Ç§„ÉóÊñπÂêë„ÇíÂà§ÂÆö
        if (Math.abs(deltaX) > minSwipeDistance || Math.abs(deltaY) > minSwipeDistance) {
            let targetCell = null;
            
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                // Ê®™ÊñπÂêë„ÅÆ„Çπ„ÉØ„Ç§„Éó
                if (deltaX > 0 && touchStartCell.col < BOARD_SIZE - 1) {
                    // Âè≥„Å´„Çπ„ÉØ„Ç§„Éó
                    targetCell = {row: touchStartCell.row, col: touchStartCell.col + 1};
                } else if (deltaX < 0 && touchStartCell.col > 0) {
                    // Â∑¶„Å´„Çπ„ÉØ„Ç§„Éó
                    targetCell = {row: touchStartCell.row, col: touchStartCell.col - 1};
                }
            } else {
                // Á∏¶ÊñπÂêë„ÅÆ„Çπ„ÉØ„Ç§„Éó
                if (deltaY > 0 && touchStartCell.row < BOARD_SIZE - 1) {
                    // ‰∏ã„Å´„Çπ„ÉØ„Ç§„Éó
                    targetCell = {row: touchStartCell.row + 1, col: touchStartCell.col};
                } else if (deltaY < 0 && touchStartCell.row > 0) {
                    // ‰∏ä„Å´„Çπ„ÉØ„Ç§„Éó
                    targetCell = {row: touchStartCell.row - 1, col: touchStartCell.col};
                }
            }
            
            if (targetCell) {
                performSwap(touchStartCell, targetCell);
            }
        }
        
        touchStartCell = null;
    }

    function selectCell(row, col) {
        if (moves <= 0) return;

        const cells = document.querySelectorAll('.cell');
        const clickedCell = {row, col};

        if (selectedCell === null) {
            selectedCell = clickedCell;
            cells[row * BOARD_SIZE + col].classList.add('selected');
        } else {
            cells[selectedCell.row * BOARD_SIZE + selectedCell.col].classList.remove('selected');
            
            if (isAdjacent(selectedCell, clickedCell)) {
                performSwap(selectedCell, clickedCell);
            }
            selectedCell = null;
        }
    }

    function performSwap(cell1, cell2) {
        swapCells(cell1, cell2);
        moves--;
        updateScore();
        
        setTimeout(() => {
            if (!checkAndRemoveMatches()) {
                // „Éû„ÉÉ„ÉÅ„Åó„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÅØÂÖÉ„Å´Êàª„Åô
                swapCells(cell1, cell2);
                renderBoard();
            } else {
                processMatches();
            }
        }, 300);
    }

    function isAdjacent(cell1, cell2) {
        const rowDiff = Math.abs(cell1.row - cell2.row);
        const colDiff = Math.abs(cell1.col - cell2.col);
        return (rowDiff === 1 && colDiff === 0) || (rowDiff === 0 && colDiff === 1);
    }

    function swapCells(cell1, cell2) {
        const temp = board[cell1.row][cell1.col];
        board[cell1.row][cell1.col] = board[cell2.row][cell2.col];
        board[cell2.row][cell2.col] = temp;
        renderBoard();
    }

    function checkAndRemoveMatches() {
        let matches = [];
        
        // Ê®™ÊñπÂêë„ÅÆ„Éû„ÉÉ„ÉÅ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        for (let i = 0; i < BOARD_SIZE; i++) {
            for (let j = 0; j < BOARD_SIZE - 2; j++) {
                if (board[i][j] === board[i][j+1] && board[i][j] === board[i][j+2]) {
                    matches.push({row: i, col: j});
                    matches.push({row: i, col: j+1});
                    matches.push({row: i, col: j+2});
                }
            }
        }
        
        // Á∏¶ÊñπÂêë„ÅÆ„Éû„ÉÉ„ÉÅ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        for (let i = 0; i < BOARD_SIZE - 2; i++) {
            for (let j = 0; j < BOARD_SIZE; j++) {
                if (board[i][j] === board[i+1][j] && board[i][j] === board[i+2][j]) {
                    matches.push({row: i, col: j});
                    matches.push({row: i+1, col: j});
                    matches.push({row: i+2, col: j});
                }
            }
        }

        if (matches.length > 0) {
            // ÈáçË§á„ÇíÂâäÈô§
            const uniqueMatches = [...new Set(matches.map(m => `${m.row},${m.col}`))].map(s => {
                const [row, col] = s.split(',').map(Number);
                return {row, col};
            });

            // „Éû„ÉÉ„ÉÅ„Åó„Åü„Çª„É´„Å´„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÇíËøΩÂä†
            uniqueMatches.forEach(match => {
                const cells = document.querySelectorAll('.cell');
                cells[match.row * BOARD_SIZE + match.col].classList.add('matched');
            });

            score += uniqueMatches.length * 10;
            
            // „Çª„É´„ÇíÂâäÈô§
            setTimeout(() => {
                uniqueMatches.forEach(match => {
                    board[match.row][match.col] = null;
                });
            }, 300);

            return true;
        }
        return false;
    }

    function fillBoard() {
        // Á©∫„ÅÆ„Çª„É´„Çí‰∏ã„Å´ËêΩ„Å®„Åô
        for (let j = 0; j < BOARD_SIZE; j++) {
            let emptyCount = 0;
            for (let i = BOARD_SIZE - 1; i >= 0; i--) {
                if (board[i][j] === null) {
                    emptyCount++;
                } else if (emptyCount > 0) {
                    board[i + emptyCount][j] = board[i][j];
                    board[i][j] = null;
                }
            }
            
            // ‰∏ä„Åã„ÇâÊñ∞„Åó„ÅÑ„Éî„Éº„Çπ„ÇíËøΩÂä†
            for (let i = 0; i < emptyCount; i++) {
                board[i][j] = FOODS[Math.floor(Math.random() * FOODS.length)];
            }
        }
    }

    function processMatches() {
        setTimeout(() => {
            fillBoard();
            renderBoard();
            
            setTimeout(() => {
                if (checkAndRemoveMatches()) {
                    processMatches();
                } else {
                    updateScore();
                    if (moves <= 0) {
                        endGame();
                    }
                }
            }, 300);
        }, 400);
    }

    function updateScore() {
        document.getElementById('score').textContent = score;
        document.getElementById('moves').textContent = moves;
    }

    function endGame() {
        document.getElementById('finalScore').textContent = score;
        document.getElementById('gameOver').classList.add('show');
        document.getElementById('overlay').classList.add('show');
    }

    function newGame() {
        score = 0;
        moves = 30;
        selectedCell = null;
        document.getElementById('gameOver').classList.remove('show');
        document.getElementById('overlay').classList.remove('show');
        createBoard();
        renderBoard();
        updateScore();
    }

    // „Ç≤„Éº„É†ÈñãÂßã
    newGame();
</script>
</body>
</html>
